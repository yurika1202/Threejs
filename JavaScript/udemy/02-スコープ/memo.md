### グローバルスコープとスクリプトスコープ

- window オブジェクト＝グローバルスコープ
- 一般的にはスクリプトスコープもグローバルスコープと呼ばれる（使い勝手が変わらないため）
- let/const はスクリプトスコープ

### 関数スコープとブロックスコープ

- b は出力される

```
function a() {
    let b = 0;
    console.log(b);
}
a();
```

- b は出力されない：関数スコープの外側から b を呼び出しているから、b が見えない状況。

```
function a() {
    let b = 0;
}
a();
console.log(b);
```

- ブロック＝{ }で囲っている部分
- ブロックスコープを有効にするためには、let や const を使う
- function はブロック外からも参照できるので、関数式（変数に代入した関数）を使用
- ブロックは if 文や for 文などで使われている

### レキシカルスコープ

- コードを書く場所によって参照できる変数が変わるスコープ仕様のこと
- 実行中のコードから見た外部スコープのこと
- コードを記述した時点でスコープ決定がされるので「静的スコープ」ともいう
- 関数コンテキストでいう、外部変数のこと

```
let a = 2;
function fn1() {
    let b = 1;
    function fn2() {
        let c = 3;
        console.log(b);
    }
}
```

- fn1()から参照できるもの：a（グローバルスコープ）
- fn2()から参照できるもの：上記＋ b（関数スコープ）

### スコープチェーン

- スコープの中にスコープがあること
- 一番内側のスコープから変数をさがしていく

### クロージャー

- レキシカルスコープの変数を関数が使用している状態のこと
- 関数が定義されたスコープとその祖先スコープにある変数や関数の使用を維持させる仕組み

1. プライベート変数の定義：[0201 参照](0201/main.js)
2. 動的な関数生成：[0202 参照](0202/main.js)

### 即時関数（IIFE）

- 関数定義と同時に一度だけ実行される関数
- 関数ではなく、実行結果が返却される

```
let result = (function(仮引数)) {
    return 戻り値;
})(実引数);
```

- 関数内でのみ使う変数・関数と、グローバルに使う変数・関数を明確に区別したいときに使用する：[0203 参照](0203/main.js)
