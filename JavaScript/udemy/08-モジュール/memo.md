- モジュール：ソースコードを機能ごとに分割して、メンテナンスしやすくする仕組み
- CommonJS（CJS）：Node.js 上でモジュール管理する仕組み
- ESModules（ESM）：ECMAScript に基づくモジュール管理の仕組み

| ESM            | CJS              |
| -------------- | ---------------- |
| import、export | require、exports |
| Browser        | Node.js          |
| .mjs           | .cjs             |

- import：ファイルの読み込み
- export：モジュールの露出
- html でファイルを読み込む際には type を module に指定すること
- モジュールで読み込んだプリミティブ型の値の変更はできない＝オブジェクトに変更する、または関数を通して変更する
- モジュールの場合はファイル読み込み時に defer が自動付与されている状態
- 複数回読み込んでも、実行されるのは 1 回のみ（即時関数と似ている）

### モジュールコンテキスト

- これまでのグローバルスコープにあたる
- this が使用できない
- window オブジェクトは参照できる

### モジュールスコープ

- これまでのスクリプトスコープにあたる
- export しない限り、ファイル外から変数や関数を参照できない

### Strict モード

- 通常の JS で許可されている一部の書き方を制限する
- 意図しないバグ防止、予約語の確保、コードのセキュア化などが目的
- ファイルまたは関数の先頭に`use strict`と記述
- モジュールの場合は常に strict モードが適用されている

### ダイナミックインポート

- 読み込んだ変数や関数を非同期で読み込むことができる

```
import('読み込みファイル').then(function(modules) {
  console.log(modules);
  modules.publicFn();
})

// await/asyncだと...
async function fn() {
  const modules = await import('読み込みファイル');
  modules.publicFn();
}
fn();
```

- 変数や関数がオブジェクトに格納されて返ってくる
- 初期表示時には必要のない変数や関数を、必要時に読み込むことができるので、ユーザー待機時間を短縮できる
-
